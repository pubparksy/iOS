<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>습관 추가</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <%- include("./nav.ejs") %>

    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column"> 
        <h2>습관 추가</h2>

        <div class="col-lg-8 mx-auto">
            <form action="habit_add" method="post" id="habit_add">

                <div class="mb-3 row">
                    <label for="habit_name"  class="col-sm-2 col-form-label">습관명</label>
                    <div class="col-sm-10">
                        <input type="text" name="habit_name" id="habit_name" class="form-control">
                    </div>
                </div>

                <div class="mb-3 row">
                    <div class="col-md-6">
                        <label for="start_dt" class="form-label">시작일</label>
                        <input type="date" class="form-control" id="start_dt" name="start_dt">
                    </div>
                    <div class="col-md-6">
                        <label for="end_dt" class="form-label">종료일</label>
                        <input type="date" class="form-control" id="end_dt" name="end_dt">
                    </div>
                </div>

                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button class="btn btn-success" type="submit" onclick="habit_add(); return false;">추가</button>
                </div>

            </form>
        </div>

    </div>
</body>
<script type="text/javascript">

// onclick Event return false;
// 태그에 대한 click 이벤트 적용시 href 속성 때문에 js 함수 호출 후 페이지 이동 현상 발생

function habit_add() {
    // let msgElement = document.querySelector("#msg");
    const habit_name = document.getElementById('habit_name').value;
    const start_dt = document.getElementById('start_dt').value;
    const end_dt = document.getElementById('end_dt').value;

    let isHabitAdd = (habit_name == null || habit_name == "") ? false : true ;
    let isStDt =  (start_dt == null || start_dt == "") ? false : true ;
    let isEdDt =  (end_dt == null || end_dt == "") ? false : true ;

    if(!isHabitAdd || !isStDt || !isEdDt) {
        if(!isHabitAdd) {
            alert("습관을 입력해주세요");
            document.getElementById('habit_name').focus();
            return false;
        } else if(!isStDt) {
            alert("시작일을 정해주세요");
            document.getElementById('start_dt').focus(); 
            return false;
        } else if(!isEdDt) {
            alert("종료일을 정해주세요");
            document.getElementById('end_dt').focus(); 
            return false;
        }
    }
        else {
        document.forms["habit_add"].submit();
    }
}
</script>
</html>